<h2>Edit copy</h2>
<label>
  Tag:
  <input id="tag-input" type="text" />
</label>
<hr/>
<section>
  <label>
    English:
    <input id="english-input" type="text" />
  </label>
</section>

<button id="save-button">Save</button>
<script>
  onmessage = handleMessage

  const tagInputEl = $('tag-input')
  const englishInputEl = $('english-input')
  const saveButtonEl = $('save-button')

  saveButtonEl.onclick = handleSaveClick

  function handleSaveClick () {
    sendMessage({
      type: 'create-copy',
      payload: {
        tag: tagInputEl.value,
        languages: {
          en: englishInputEl.value
        }
      }
    })
  }

  function handleMessage ({ data }) {
    const { type, payload } = data.pluginMessage
    if (type === 'text-selected') {
      englishInputEl.value = payload.characters
    }
  }

  function sendMessage(message) {
    parent.postMessage({pluginMessage: message }, '*')
  }

  function $(elementId) {
    return document.getElementById(elementId)
  }
</script>
